---
title: Rust笔记2-Rust环境搭建
date: '2025-08-15'
tags: ['rust', '成长']
draft: true
summary: 今天来讲讲如何搭建Rust编译环境
---

### 前言
学习编程语言总是绕不过的第一节课，那就是搭建环境-。- 让我们直接开始

<DividerSmall />


### 在 macOS、Linux、Windows 上安装 Rust 以及相关工具链

rustup 是 Rust 的安装程序，也是他的版本管理程序，我强烈建议使用 rustup 来安装 Rust


#### 在 Linux / MacOS 上安装 rustup

打开终端并输入下面的命令
```bash title="安装命令"

curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh

```

这个命令将下载一个脚本并开始安装 rustup 工具，此工具将安装 Rust 的最新稳定版本。可能会提示你输入管理员密码。

如果安装成功，将出现下面这行：

```bash
Rust is installed now. Great!
```

ok 这样 Rust 就完成安装啦 -,-

#### 安装 C 语言编译器：（非必需）
Rust 对运行环境的依赖和 Go 语言很像，几乎所有环境都可以无需安装任何依赖直接运行。但是，Rust 会依赖 libc 和链接器 linker。所以如果遇到了提示链接器无法执行的错误，你需要再手动安装一个 C 语言编译器：

##### MacOS 下
```bash
xcode-select --install
```



#### 在 Windows 上安装 rustup
Windows 上安装 Rust 需要有 C++ 环境，以下为安装的两种方式：

1. `x86_64-pc-windows-msvc`（官方推荐）
先安装 `Microsoft C++ Build Tools`，勾选安装 `C++` 环境即可。安装时可自行修改缓存路径与安装路径，避免占用过多 C 盘空间。安装完成后，Rust 所需的 msvc 命令行程序需要手动添加到环境变量中，否则安装 Rust 时 `rustup-init` 会
提示未安装 `Microsoft C++ Build Tools`，其位于：`%Visual Studio` 安装位置`%\VC\Tools\MSVC\%version%\bin\Hostx64\x64`（请自行替换其中的 %Visual Studio 安装位置%、%version% 字段）下。

如果你不想这么做，可以选择安装 `Microsoft C++ Build Tools` 新增的“定制”终端 Developer Command Prompt for %Visual Studio version% 或 Developer PowerShell for %Visual Studio version%，在其中运行 `rustup-init.exe`。


### 简单介绍 Cargo

作为一门现代化语言，Rust 吸收了多个语言的包管理优点，为大家提供超级大杀器： cargo，真的，再挑剔的开发者，都对它赞不绝口。👍
总而言之，cargo 提供了一系列的工具，从项目的建立、构建到测试、运行直至部署，为 Rust 项目的管理提供尽可能完整的手段。同时，与 Rust 语言及其编译器 rustc 紧密结合，可以说用了后就忘不掉。


### 使用 Cargo 创建一个项目

上文提到，Cargo 是 Rust 的包管理工具，在安装 rustup 时，Cargo 也同时被安装好了，现在让我们来新建一个项目，写出我们的第一个 `Hello world!`。
打开终端，使用 Cargo 新建一个项目，执行下面的命令：

```bash
cargo new hello_world
cd hello_world
```

上面的命令使用 cargo 新建了一个名为 `hello_world` 的新项目，同时生成了一些基础文件，该项目的结构与配置文件都是cargo生成，意味着这个项目被cargo管理

早期的 cargo 在创建项目的时候必须追加 `--bin` 参数，如下所示

```bash

cargo new hello_world --bin
cd hello_world

```

这是因为 Rust 主要分为两个类型，`bin` 和 `lib`，前者是一个可运行的项目，后者是一个依赖库项目。
在最新版本则无需追加 `--bin` 参数了，默认新增的就是 bin项目。

下面让我们来看下创建的项目结构

```bash

tree

.
├── .git
├── .gitignore
├── Cargo.toml
└── src
    └── main.rs

```

没错，连 `git` 都给你创建了 -.- , 不禁令人感叹，真是贴心小棉袄。



### 运行项目

有两种方式可以运行项目
1. `cargo run`
2. 手动编译和运行项目

我们先来看看第一种方式，在之前创建的 `hello_world` 目录下执行
```bash

cargo run

Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.15s
     Running `target/debug/hello_world`

```
上述代码，`cargo run` 实际上等同于运行了两个命令，
1. 首先对项目进行编译
2. 运行编译产物

下面我们尝试手动编译一下项目
```bash
cargo build
```

运行编译产物
```bash
./target/debug/hello_world
```

可能有读者发现了，我们运行的是 debug 目录下的产物，是的，我们运行的是debug模式，在这种模式下，编译速度会非常快，但是有经验的读者一定明白，一切皆是权衡，提高编译速度的同时，就不会做任何优化了，仅仅是为了快速通过编译，
让你的开发可以顺畅进行，那么问题来了，如果我想要高性能的代码怎么办？有办法，
```bash
cargo run --release
cargo build --release
```

### cargo check

当项目大了之后，`cargo run` `cargo build` 总是会不可避免的变慢，那有没有更快的方式来验证代码是否可以通过编译呢？有的！
```bash
cargo check
```
cargo check 是我们在代码开发过程中最常用的命令，它的作用很简单：快速的检查一下代码能否编译通过。因此该命令速度会非常快，能节省大量的编译时间。



### Cargo.toml 和 Cargo.lock
Cargo.toml 和 Cargo.lock 是 cargo 的核心文件，它的所有活动均基于此二者。

- `Cargo.toml` 是 cargo 特有的项目数据描述文件。它存储了项目的所有元配置信息，如果 Rust 开发者希望 Rust 项目能够按照期望的方式进行构建、测试和运行，那么，必须按照合理的方式构建 `Cargo.toml`。

- `Cargo.lock` 文件是 cargo 工具根据同一项目的 toml 文件生成的项目依赖详细清单，因此我们一般不用修改它，只需要对着 `Cargo.toml` 文件撸就行了。

什么情况下应该将 `Cargo.lock` 上传至 git 呢？当你的项目是一个可运行的项目时，你就将它上传，如果是一个依赖库项目，则不必

#### Cargo.toml

```toml

[package]
name = "hello_world"
version = "0.1.0"
edition = "2021"

```
这是一个典型的 Cargo.toml 文件的内容，包含了
- name: 项目名称
- version: 项目版本
- edition: 定义了项目使用的 Rust 的大版本









